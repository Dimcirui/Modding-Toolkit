END_TO_MHWI_MAP = {
    "Pelvis": "MhBone_013",
    
    "Spine": "MhBone_001",
    "Spine1": "MhBone_001",
    "Spine2": "MhBone_002",

    "L_Clavicle": "MhBone_005",
    "L_UpperArm": "MhBone_006",
    "LUpArmTwist": "MhBone_006",
    "LUpArmTwist1": "MhBone_006",
    "L_UpperArm_ty_minus": "MhBone_006",
    "L_UpperArm_ty_plus": "MhBone_006",
    "L_UpperArm_tz_minus": "MhBone_006",
    "L_UpperArm_tz_plus": "MhBone_006",
    "L_Forearm": "MhBone_007",
    "L_ForeTwist": "MhBone_007",
    "L_ForeTwist1": "MhBone_007",
    "L_Forearm_ty_minus": "MhBone_007",
    "L_Forearm_ty_plus": "MhBone_071",
    "L_Hand": "MhBone_008",
    "L_Hand_ty_minus": "MhBone_008",
    "L_Hand_ty_plus": "MhBone_008",
    "L_FingerTop1": "MhBone_008",
    "L_FingerTop2": "MhBone_008",
    "L_FingerTop3": "MhBone_008",
    "L_FingerTop4": "MhBone_008",
    "L_Finger0": "MhBone_031",
    "L_Finger01": "MhBone_032",
    "L_Finger02": "MhBone_033",
    "L_Finger1": "MhBone_034",
    "L_Finger11": "MhBone_035",
    "L_Finger12": "MhBone_036",
    "L_Finger2": "MhBone_037",
    "L_Finger21": "MhBone_038",
    "L_Finger22": "MhBone_039",
    "L_Finger3": "MhBone_041",
    "L_Finger31": "MhBone_042",
    "L_Finger32": "MhBone_043",
    "L_Finger4": "MhBone_044",
    "L_Finger41": "MhBone_045",
    "L_Finger42": "MhBone_046",

    "R_Clavicle": "MhBone_009",
    "R_UpperArm": "MhBone_010",
    "RUpArmTwist": "MhBone_010",
    "RUpArmTwist1": "MhBone_010",
    "R_UpperArm_ty_minus": "MhBone_010",
    "R_UpperArm_ty_plus": "MhBone_010",
    "R_UpperArm_tz_minus": "MhBone_010",
    "R_UpperArm_tz_plus": "MhBone_010",
    "R_Forearm": "MhBone_011",
    "R_ForeTwist": "MhBone_011",
    "R_ForeTwist1": "MhBone_011",
    "R_Forearm_ty_minus": "MhBone_011",
    "R_Forearm_ty_plus": "MhBone_073",
    "R_Hand": "MhBone_012",
    "R_Hand_ty_minus": "MhBone_012",
    "R_Hand_ty_plus": "MhBone_012",
    "R_FingerTop1": "MhBone_012",
    "R_FingerTop2": "MhBone_012",
    "R_FingerTop3": "MhBone_012",
    "R_FingerTop4": "MhBone_012",
    "R_Finger0": "MhBone_048",
    "R_Finger01": "MhBone_049",
    "R_Finger02": "MhBone_050",
    "R_Finger1": "MhBone_051",
    "R_Finger11": "MhBone_052",
    "R_Finger12": "MhBone_053",
    "R_Finger2": "MhBone_054",
    "R_Finger21": "MhBone_055",
    "R_Finger22": "MhBone_056",
    "R_Finger3": "MhBone_058",
    "R_Finger31": "MhBone_059",
    "R_Finger32": "MhBone_060",
    "R_Finger4": "MhBone_061",
    "R_Finger41": "MhBone_062",
    "R_Finger42": "MhBone_063",
    
    "L_Thigh": "MhBone_014",
    "LThighTwist": "MhBone_014",
    "LThighTwist1": "MhBone_014",
    "L_Thigh_tz_minus": "MhBone_014",
    "L_Thigh_ty_plus": "MhBone_014",
    "L_Thigh_ty_minus": "MhBone_014",
    "L_Calf_ty_minus": "MhBone_014",
    "L_Calf": "MhBone_015",
    "LCalfTwist": "MhBone_015",
    "LCalfTwist1": "MhBone_015",
    "L_Calf_ty_plus": "MhBone_075",
    "L_Foot": "MhBone_016",
    "L_Foot_ty_minus": "MhBone_016",
    "L_Foot_ty_plus": "MhBone_016",
    "L_Toe0": "MhBone_017",

    "R_Thigh": "MhBone_018",
    "RThighTwist": "MhBone_018",
    "RThighTwist1": "MhBone_018",
    "R_Thigh_tz_minus": "MhBone_018",
    "R_Thigh_ty_plus": "MhBone_018",
    "R_Thigh_ty_minus": "MhBone_018",
    "R_Calf_ty_minus": "MhBone_018",
    "R_Calf": "MhBone_019",
    "RCalfTwist": "MhBone_019",
    "RCalfTwist1": "MhBone_019",
    "R_Calf_ty_plus": "MhBone_077",
    "R_Foot": "MhBone_020",
    "R_Foot_ty_minus": "MhBone_020",
    "R_Foot_ty_plus": "MhBone_020",
    "R_Toe0": "MhBone_021",
    
    "Neck": "MhBone_003",
    "Head": "MhBone_004",
    "head_dn_jnt": "MhBone_004",
    "head_mid_jnt": "MhBone_004",
    "head_up_jnt": "MhBone_004",

    "browLf01Joint": "MhBone_308",
    "browLf02Joint": "MhBone_308",
    "browLf03Joint": "MhBone_307",
    "browLf04Joint": "MhBone_307",
    "browLf05Joint": "MhBone_307",

    "browRt01Joint": "MhBone_310",
    "browRt02Joint": "MhBone_310",
    "browRt03Joint": "MhBone_311",
    "browRt04Joint": "MhBone_311",
    "browRt05Joint": "MhBone_311",

    "eyeLf01Joint": "MhBone_319",
    "eyeLf02Joint": "MhBone_320",
    "eyeLf03Joint": "MhBone_321",
    "eyeLf03IrissdJoint": "MhBone_321",
    "eyeLf04Joint": "MhBone_322",
    "eyeLf05Joint": "MhBone_323",
    "eyeLf06Joint": "MhBone_324",
    "eyeLf07Joint": "MhBone_325",
    "eyeLf08Joint": "MhBone_326",
    "faceLfIrisJoint": "MhBone_315",
    "faceLfPupilJoint": "MhBone_315",
    "faceLfHighlightJoint": "MhBone_315",
    "browLineLf01Joint": "MhBone_320",
    "browLineLf02Joint": "MhBone_321",
    "browLineLf03Joint": "MhBone_322",
    "eyeLf01EyelashJoint": "MhBone_319",
    "eyeLf02EyelashJoint": "MhBone_320",
    "eyeLf03EyelashJoint": "MhBone_321",
    "eyeLf04EyelashJoint": "MhBone_322",
    "eyeLf05EyelashJoint": "MhBone_323",

    "eyeRt01Joint": "MhBone_332",
    "eyeRt02Joint": "MhBone_333",
    "eyeRt03Joint": "MhBone_334",
    "eyeRt03IrissdJoint": "MhBone_334",
    "eyeRt04Joint": "MhBone_335",
    "eyeRt05Joint": "MhBone_336",
    "eyeRt06Joint": "MhBone_337",
    "eyeRt07Joint": "MhBone_338",
    "eyeRt08Joint": "MhBone_339",
    "faceRtIrisJoint": "MhBone_328",
    "faceRtPupilJoint": "MhBone_328",
    "faceRtHighlightJoint": "MhBone_328",
    "browLineRt01Joint": "MhBone_333",
    "browLineRt02Joint": "MhBone_334",
    "browLineRt03Joint": "MhBone_335",
    "eyeRt01EyelashJoint": "MhBone_332",
    "eyeRt02EyelashJoint": "MhBone_333",
    "eyeRt03EyelashJoint": "MhBone_334",
    "eyeRt04EyelashJoint": "MhBone_335",
    "eyeRt05EyelashJoint": "MhBone_336",

    "lipLup1Joint": "MhBone_384",
    "lipLup2Joint": "MhBone_383",
    "lipLup3Joint": "MhBone_382",
    "lipLup4Joint": "MhBone_382",
    "lipMupJoint": "MhBone_381",
    "lipRup1Joint": "MhBone_385",
    "lipRup2Joint": "MhBone_379",
    "lipRup3Joint": "MhBone_380",
    "lipRup4Joint": "MhBone_380",
    "faceMdToothUpJoint": "MhBone_381",

    "lipLdn1Joint": "MhBone_384",
    "lipLdn2Joint": "MhBone_386",
    "lipLdn3Joint": "MhBone_386",
    "lipLdn4Joint": "MhBone_386",
    "lipMdnJoint": "MhBone_388",
    "lipRdn1Joint": "MhBone_385",
    "lipRdn2Joint": "MhBone_390",
    "lipRdn3Joint": "MhBone_390",
    "lipRdn4Joint": "MhBone_390",
    
    "faceMdToothDnJoint": "MhBone_372",
    "TongueMd01Joint": "MhBone_373",
    "TongueMd02Joint": "MhBone_372",
    "TongueMd03Joint": "MhBone_372",
    "TongueMd04Joint": "MhBone_372",

    "linejoint": "MhBone_004",
    "lineJoint": "MhBone_004",
    "line_toothJoint": "MhBone_004",
    "NoseMd01Joint": "MhBone_004",

    "jawJoint": "MhBone_004",
    "faceLfCheekOtUpJoint": "MhBone_004",
    "faceLfCheekOtInJoint": "MhBone_004",
    "faceRtCheekOtInJoint": "MhBone_004",
    "faceRtCheekOtUpJoint": "MhBone_004",
    "faceLfCheekOtDnJoint": "MhBone_404",
    "faceLfCheekOtJoint": "MhBone_404",
    "faceMdJawDnJoint": "MhBone_404",
    "faceRtCheekOtDnJoint": "MhBone_404",
    "faceRtCheekOtJoint": "MhBone_404",
}

JP_MMD_MAP = [
    # 躯干
    ("下半身", "MhBone_013"),
    ("上半身", "MhBone_001"),
    ("上半身2", "MhBone_002"),
    ("首", "MhBone_003"),
    ("頭", "MhBone_004"),
    ("首", "MhBone_254"),
    
    # 左臂
    ("肩.L", "MhBone_005"),
    ("腕.L", "MhBone_006"),
    ("ひじ.L", "MhBone_007"),
    ("手首.L", "MhBone_008"),
    ("手首.L", "MhBone_030"),
    ("親指０.L", "MhBone_031"),
    ("親指１.L", "MhBone_032"),
    ("親指２.L", "MhBone_033"),
    ("人指１.L", "MhBone_034"),
    ("人指２.L", "MhBone_035"),
    ("人指３.L", "MhBone_036"),
    ("中指１.L", "MhBone_037"),
    ("中指２.L", "MhBone_038"),
    ("中指３.L", "MhBone_039"),
    ("手首.L", "MhBone_040"),
    ("薬指１.L", "MhBone_041"),
    ("薬指２.L", "MhBone_042"),
    ("薬指３.L", "MhBone_043"),
    ("小指１.L", "MhBone_044"),
    ("小指２.L", "MhBone_045"),
    ("小指３.L", "MhBone_046"),
    
    # 右臂
    ("肩.R", "MhBone_009"),
    ("腕.R", "MhBone_010"),
    ("ひじ.R", "MhBone_011"),
    ("手首.R", "MhBone_012"),
    ("手首.R", "MhBone_047"),
    ("親指０.R", "MhBone_048"),
    ("親指１.R", "MhBone_049"),
    ("親指２.R", "MhBone_050"),
    ("人指１.R", "MhBone_051"),
    ("人指２.R", "MhBone_052"),
    ("人指３.R", "MhBone_053"),
    ("中指１.R", "MhBone_054"),
    ("中指２.R", "MhBone_055"),
    ("中指３.R", "MhBone_056"),
    ("手首.R", "MhBone_057"),
    ("薬指１.R", "MhBone_058"),
    ("薬指２.R", "MhBone_059"),
    ("薬指３.R", "MhBone_060"),
    ("小指１.R", "MhBone_061"),
    ("小指２.R", "MhBone_062"),
    ("小指３.R", "MhBone_063"),
    
    # 腿部
    ("足D.L", "MhBone_014"),
    ("ひざD.L", "MhBone_015"),
    ("足首D.L", "MhBone_016"),
    ("足先EX.L", "MhBone_017"),
    ("足D.R", "MhBone_018"),
    ("ひざD.R", "MhBone_019"),
    ("足首D.R", "MhBone_020"),
    ("足先EX.R", "MhBone_021"),
    
    # 辅助骨骼
    ("腕.L", "MhBone_070"),
    ("ひじ.L", "MhBone_071"),
    ("腕.L", "MhBone_080"),
    ("手捩.L", "MhBone_081"),
    ("腕.R", "MhBone_072"),
    ("ひじ.R", "MhBone_073"),
    ("腕.R", "MhBone_082"),
    ("手捩.R", "MhBone_083"),
    ("足D.L", "MhBone_074"),
    ("ひざD.L", "MhBone_075"),
    ("足首D.L", "MhBone_084"),
    ("足D.R", "MhBone_076"),
    ("ひざD.R", "MhBone_077"),
    ("足首D.R", "MhBone_085"),
]

EN_MMD_MAP = [
    # 躯干
    ("Hips", "MhBone_013"),
    ("Spine", "MhBone_001"),
    ("Chest", "MhBone_002"),
    ("Neck", "MhBone_003"),
    ("Head", "MhBone_004"),
    ("Neck", "MhBone_254"),
    
    # 左臂
    ("Left shoulder", "MhBone_005"),
    ("Left arm", "MhBone_006"),
    ("Left elbow", "MhBone_007"),
    ("Left wrist", "MhBone_008"),
    ("Left wrist", "MhBone_030"),
    ("Thumb0_L", "MhBone_031"),
    ("Thumb1_L", "MhBone_032"),
    ("Thumb2_L", "MhBone_033"),
    ("IndexFinger1_L", "MhBone_034"),
    ("IndexFinger2_L", "MhBone_035"),
    ("IndexFinger3_L", "MhBone_036"),
    ("MiddleFinger1_L", "MhBone_037"),
    ("MiddleFinger2_L", "MhBone_038"),
    ("MiddleFinger3_L", "MhBone_039"),
    ("Left wrist", "MhBone_040"),
    ("RingFinger1_L", "MhBone_041"),
    ("RingFinger2_L", "MhBone_042"),
    ("RingFinger3_L", "MhBone_043"),
    ("LittleFinger1_L", "MhBone_044"),
    ("LittleFinger2_L", "MhBone_045"),
    ("LittleFinger3_L", "MhBone_046"),
    
    # 右臂
    ("Right shoulder", "MhBone_009"),
    ("Right arm", "MhBone_010"),
    ("Right elbow", "MhBone_011"),
    ("Right wrist", "MhBone_012"),
    ("Right wrist", "MhBone_047"),
    ("Thumb0_R", "MhBone_048"),
    ("Thumb1_R", "MhBone_049"),
    ("Thumb2_R", "MhBone_050"),
    ("IndexFinger1_R", "MhBone_051"),
    ("IndexFinger2_R", "MhBone_052"),
    ("IndexFinger3_R", "MhBone_053"),
    ("MiddleFinger1_R", "MhBone_054"),
    ("MiddleFinger2_R", "MhBone_055"),
    ("MiddleFinger3_R", "MhBone_056"),
    ("Right wrist", "MhBone_057"),
    ("RingFinger1_R", "MhBone_058"),
    ("RingFinger2_R", "MhBone_059"),
    ("RingFinger3_R", "MhBone_060"),
    ("LittleFinger1_R", "MhBone_061"),
    ("LittleFinger2_R", "MhBone_062"),
    ("LittleFinger3_R", "MhBone_063"),
    
    # 腿部
    ("Left leg", "MhBone_014"),
    ("Left knee", "MhBone_015"),
    ("Left ankle", "MhBone_016"),
    ("Left toe", "MhBone_017"),
    ("Right leg", "MhBone_018"),
    ("Right knee", "MhBone_019"),
    ("Right ankle", "MhBone_020"),
    ("Right toe", "MhBone_021"),
    
    # 辅助骨骼
    ("Left arm", "MhBone_070"),
    ("Left elbow", "MhBone_071"),
    ("Left arm", "MhBone_080"),
    ("zHandTwist_L", "MhBone_081"),
    ("Right arm", "MhBone_072"),
    ("Right elbow", "MhBone_073"),
    ("Right arm", "MhBone_082"),
    ("zHandTwist_R", "MhBone_083"),
    ("Left leg", "MhBone_074"),
    ("Left knee", "MhBone_075"),
    ("Left ankle", "MhBone_084"),
    ("Right leg", "MhBone_076"),
    ("Right knee", "MhBone_077"),
    ("Right ankle", "MhBone_085"),
]

# 需要特殊处理的肘部辅助骨骼
ELBOW_AUX_BONES = [
    "MhBone_101",
    "MhBone_102", 
    "MhBone_103",
    "MhBone_104",
]

# VRChat (Unity Humanoid) -> MHWI 映射表
VRC_TO_MHWI_MAP = {
    # === 躯干 ===
    "Hips": "MhBone_013",
    "Spine": "MhBone_001",
    "Chest": "MhBone_002",
    "Neck": "MhBone_003",
    "Head": "MhBone_004",
    
    # === 左臂 ===
    "Shoulder_L": "MhBone_005", "Left shoulder": "MhBone_005", "Shoulder.L": "MhBone_005",
    "UpperArm_L": "MhBone_006", "Left arm": "MhBone_006", "LeftUpperArm": "MhBone_006", "UpperArm.L": "MhBone_006",
    "LowerArm_L": "MhBone_007", "Left elbow": "MhBone_007", "LeftLowerArm": "MhBone_007", "LowerArm.L": "MhBone_007",
    "Hand_L": "MhBone_008", "Left wrist": "MhBone_008", "Hand.L": "MhBone_008",
    
    # === 右臂 ===
    "Shoulder_R": "MhBone_009", "Right shoulder": "MhBone_009", "Shoulder.R": "MhBone_009",
    "UpperArm_R": "MhBone_010", "Right arm": "MhBone_010", "RightUpperArm": "MhBone_010", "UpperArm.R": "MhBone_010",
    "LowerArm_R": "MhBone_011", "Right elbow": "MhBone_011", "RightLowerArm": "MhBone_011", "LowerArm.R": "MhBone_011",
    "Hand_R": "MhBone_012", "Right wrist": "MhBone_012", "Hand.R": "MhBone_012",
    
    # === 腿部 ===
    "UpperLeg_L": "MhBone_014", "Left leg": "MhBone_014", "UpperLeg.L": "MhBone_014",
    "LowerLeg_L": "MhBone_015", "Left knee": "MhBone_015", "LowerLeg.L": "MhBone_015",
    "Foot_L": "MhBone_016", "Left ankle": "MhBone_016", "Foot.L": "MhBone_016",
    "Toe_L": "MhBone_017", "Left toe": "MhBone_017", "Toe.L": "MhBone_017",
    
    "UpperLeg_R": "MhBone_018", "Right leg": "MhBone_018", "UpperLeg.R": "MhBone_018",
    "LowerLeg_R": "MhBone_019", "Right knee": "MhBone_019", "LowerLeg.R": "MhBone_019",
    "Foot_R": "MhBone_020", "Right ankle": "MhBone_020", "Foot.R": "MhBone_020",
    "Toe_R": "MhBone_021", "Right toe": "MhBone_021", "Toe.R": "MhBone_021",
    
    # === 手指 (左) ===
    "ThumbProximal_L": "MhBone_031", "ThumbIntermediate_L": "MhBone_032", "ThumbDistal_L": "MhBone_033",
    "IndexProximal_L": "MhBone_034", "IndexIntermediate_L": "MhBone_035", "IndexDistal_L": "MhBone_036",
    "MiddleProximal_L": "MhBone_037", "MiddleIntermediate_L": "MhBone_038", "MiddleDistal_L": "MhBone_039",
    "RingProximal_L": "MhBone_041", "RingIntermediate_L": "MhBone_042", "RingDistal_L": "MhBone_043",
    "LittleProximal_L": "MhBone_044", "LittleIntermediate_L": "MhBone_045", "LittleDistal_L": "MhBone_046",
    
    # === 手指 (右) ===
    "ThumbProximal_R": "MhBone_048", "ThumbIntermediate_R": "MhBone_049", "ThumbDistal_R": "MhBone_050",
    "IndexProximal_R": "MhBone_051", "IndexIntermediate_R": "MhBone_052", "IndexDistal_R": "MhBone_053",
    "MiddleProximal_R": "MhBone_054", "MiddleIntermediate_R": "MhBone_055", "MiddleDistal_R": "MhBone_056",
    "RingProximal_R": "MhBone_058", "RingIntermediate_R": "MhBone_059", "RingDistal_R": "MhBone_060",
    "LittleProximal_R": "MhBone_061", "LittleIntermediate_R": "MhBone_062", "LittleDistal_R": "MhBone_063",
    
    # === 辅助 ===
    "LowerArm_twist_L": "MhBone_081", "LowerArm_Twist_L": "MhBone_081",
    "LowerArm_twist_R": "MhBone_083", "LowerArm_Twist_R": "MhBone_083",
    "Hips_L": "MhBone_074", "Hips_R": "MhBone_076",
}